<template>
  <div>
    <hr>
    <h1>this test uses paths</h1>
    <svg xmlns="http://www.w3.org/2000/svg" width="960" height="500">
      <g>
        <path d="M224.3,30.3c-0.1,1.2-9.6,117-35.5,139c-8.3,7-25.5,11.4-45.1,14c-6.5-7-12.8-14.2-18.9-21.5c20.4,0.2,37.2-1.6,45.8-7.7
	c3.4-2.4,5.4-5.4,6-9c0.1-0.8,0.2-1.6,0.2-2.5c-0.6-29.5-17.5-131.2-18.2-135.5l-8.2,0.4c0.2,1.1,17.6,105.7,18.2,134.8
	c0.1,2.7-1.1,4.9-3.7,6.7c-7.5,5.4-25,6.6-45.6,6.1c-8.5-10.6-16.3-21.2-23.1-31.5c14.2-1.7,26.3-4.2,32.6-7.7
	c6.8-3.9,10.3-11.2,11.7-19.9c3.6-21.8-5.7-52-7.2-56.6l-0.3-0.9L89,0l-5.8,4.3l42.5,37.1c5.3,16.8,14.6,59.6-1.9,68.9
	c-5.6,3.2-17.3,5.4-31.5,7C71.9,84.5,62.5,54.9,75.7,38.6l-7-3.9c-15,18.5-6,49.6,14.6,83.4c-29.4,2.5-65.8,2.6-83.4,2.3l0.4,6.6
	c2.9,0.1,49.7,0.9,87-2.6c6.4,10,13.8,20.1,21.8,30.2c-18.8-1-39.3-3.1-56.9-5c-14.4-1.5-28-2.9-38.4-3.5l0,6.6
	c10.1,0.6,23.6,2,37.9,3.5c21,2.2,43.2,4.5,63,5.4c6.4,7.7,13,15.4,19.9,22.8c-39.1,4.2-83.4,2.5-84.1,2.5l0.2,6.6
	c3,0.1,49.1,1.8,89.5-3c16.3,17.2,33.4,33.3,49.6,46.8l5.7-4.4c-15.2-12.7-31.1-27.6-46.3-43.6c19.6-2.9,36.8-7.7,45.7-15.2
	c15.2-13,24.9-53.4,30.7-88c4.7-28.3,6.7-52.6,6.8-54.8L224.3,30.3z"/>
        <path d="M172.2,209.5c-5.2-5-11-2.8-16.7-1.2c-22.4-13.1,6.2-51.3-23.2-63.4c-7.3-6.5-26.1,10.6-21.7-5.2
	c0.9-3.1-3.5-8.9-1.7-9.3c3-3.4,2.3-9.3-1.2-13c18.2-22.5-11.8-3.8,4.5-30c-4.7-16.3-2.9-3,2.8-17.5c9.1,4.4,14.2-1.9,20.3-7.9
	c2.4-7.7,9.6-12.1,2.2-18.9c6.8,2.2,14.5-3.2,12.9-11.1c-7.2-10.7-11-22.2-19.6-32.1c-6.1,8.3,18.3,27.7,13.6,35.7
	c-1.2,5.7-12.2-0.5-11.2,8.4c7.7,9.3-4.8,15.8-9.7,23.3c-2.9-0.8-7.3-2.5-10.3-3.5c1.7,2.3,2.3,1.1-0.4,2.6
	c-2.7,4.1-4.1,7.7-8.1,10.8c-1.9,5.1,5.3,6.6,2.7,11.6c-4.1,8.3-11.5,13.3-15.8,22.1c-6.1,9.8-25.3,7.1-27.1,15.1
	c-6,0.7-11.9,2.6-18,3.1c-2.1-2.4-5.1-2.5-7.8,0.9c-6,10-6.1-7.8-8.7-12.1c-6.6-2.9-2.1-8.7-7.8-12.6c-2.4-1.1-1.8-4.6-4.1-6
	c-7.5-10.4-4-28.2-17.9-9.4c1.9,3.2,6,1.3,7.6-1.3c0.1-3.8,7.5,18.1,13.2,21.5c-0.5,4.7,3.5,7.9,5.8,10.9c1,4.8,2.2,15.3,6.1,17.7
	c10.6-6.3,19.5-6.5,32.6-8.7c5.8-5,13.5-5.6,21.5-9.9c12-4.3,7.8-20.7,22.7-12.4c-10.1,8.4-4.6,9.4-3.7,18.7
	c-3.4,1.3-3.9,2.3-2.4,5.3c5,5.4-1,11.4,3.2,16.3c11.6,11.8,26.7-14.7,34.5,16.6c2.1,18.4-8.4,52.3,24.3,47.4
	c3.3,0.4,6.2,3.1,9.3,4.3C174.4,213.7,175.7,210.1,172.2,209.5z"/>
      </g>
    </svg>
    <hr>
  </div>
</template>

<script>
  import * as d3 from 'd3';
  import * as flubber from "flubber";

  export default {
      name: 'Transform',
      data() {
          return {

          }
      },
      mounted() {

          let pathStrings = Array.from(document.querySelectorAll("path")).map(d => d.getAttribute("d"));

// Remove all the paths except the first
          d3.selectAll("path")
                  .filter(function(d, i) { return i; })
                  .remove();

          d3.select("path")
                  .style("display", "block")
                  .call(animate);

          function animate(sel) {
              let start = pathStrings.shift(),
                      end = pathStrings[0];

              pathStrings.push(start);

              sel
                      .datum({ start, end })
                      .transition()
                      .duration(1500)
                      // .attrTween("d", function(d){
                      //     return flubber.interpolate(d.start, d.end, { maxSegmentLength: 0.1 })
                      // })
//                       .on("end", function() {
//                           sel.call(animate);
//                       });
          }

      }
  }
</script>

<style scoped lang="scss">
  path {
    fill: #8b00ff;
    display: none;
  }
</style>
